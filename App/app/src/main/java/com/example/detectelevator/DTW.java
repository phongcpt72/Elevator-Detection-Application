package com.example.detectelevator;

import java.util.ArrayList;
import java.util.List;

import smile.math.distance.DynamicTimeWarping;

public class DTW {

    private List<Double> startz;
    private List<Double> endz;
    private Integer desno;

    public DTW(List startZ, List endzZ, Integer desNo)
    {
        startz = startZ;
        this.endz = endzZ;
        this.desno = desNo;
    }

    public List<Double> calculateDTW(){
        List<Double> dtwlist = new ArrayList<Double>();
        if (desno == 1) {
            double[] startzarr = new double[startz.size()];
            for(int i = 0; i < startz.size(); i++)
            {
                startzarr[i] = Double.parseDouble(String.valueOf(startz.get(i)));
            }
            double[] starttemplate = {10.041074852272992, 10.054353414615372, 10.067518475212795, 10.080402096745068, 10.093614929945291, 10.106141926454944, 10.118557802589361, 10.130338649671268, 10.142217635733111, 10.153477107817595, 10.16414864325218, 10.174985142481304, 10.18506844598882, 10.194028528602772, 10.20271966310419, 10.210726920491751, 10.218593001931442, 10.226060207520629, 10.232133098043835, 10.237094261396752, 10.240657811213374, 10.244283225568958, 10.24688025727365, 10.249599333897072, 10.25103300490885, 10.251583344195353, 10.250334454561735, 10.247541323589136, 10.244046634507459, 10.239949880692444, 10.234819362946345, 10.22921175758307, 10.2228296830882, 10.216093326342323, 10.208498660433614, 10.200488590496496, 10.191897130614816, 10.18272986882743, 10.17265774473517, 10.162588312402734, 10.1522539270265, 10.14280012138653, 10.13334734943599, 10.123264834741985, 10.113155608765224, 10.103111584245188, 10.094296439367175, 10.086598867062415, 10.07775435369158, 10.068636626226905, 10.059816673435577, 10.051241947274454, 10.043404841436919, 10.035589093007475, 10.02675831933163, 10.017676019897744};
            double startdis = DynamicTimeWarping.d(startzarr,starttemplate);

            double[] endzarr = new double[endz.size()];
            for(int i = 0; i < endz.size(); i++)
            {
                endzarr[i] = Double.parseDouble(String.valueOf(endz.get(i)));
            }
            double[] endtemplate = {9.665207435483971, 9.651138818370953, 9.636404081733223, 9.622154816041355, 9.607198261154515, 9.5934780863269, 9.58036997655315, 9.56726278547887, 9.554206530925658, 9.542244528752757, 9.530850101107763, 9.520138444380311, 9.510004628483752, 9.500502066746899, 9.490735191229362, 9.480863958018205, 9.470816793198283, 9.461487605134753, 9.453119217628595, 9.445659857410075, 9.43902513970437, 9.43418156589006, 9.430919635697343, 9.428553401582988, 9.427386411936391, 9.427337548785662, 9.42834622835316, 9.430116585844997, 9.432614293490031, 9.436152772996678, 9.439937593766686, 9.444589511208363, 9.449622935897208, 9.45537448235742, 9.460608387654739, 9.466030456754174, 9.471690764372578, 9.478315718124492, 9.48514835299498, 9.491747960901925, 9.498892816626391, 9.50621282276531, 9.513472912660701, 9.520752924528141, 9.52795571816095, 9.535502595970895, 9.543184296975843, 9.55144411509517, 9.559080819671587, 9.566139448985012, 9.572988595980936, 9.580116567037619, 9.58728338608061, 9.594873453861851, 9.602424561375955, 9.609373203851838, 9.616416017229296, 9.622897562074963, 9.628943752199849, 9.635732941569744, 9.64297269964357, 9.650221571530231, 9.65724361439894};
            double enddis = DynamicTimeWarping.d(endzarr,endtemplate);
            dtwlist.add(startdis);
            dtwlist.add(enddis);
        }
        else if (desno == 2) {
            double[] startzarr = new double[startz.size()];
            for(int i = 0; i < startz.size(); i++)
            {
                startzarr[i] = Double.parseDouble(String.valueOf(startz.get(i)));
            }
            double[] starttemplate = {9.670487645783787, 9.657914657989062, 9.645464440023778, 9.632663671274308, 9.619632238436466, 9.60689365880079, 9.595269356290352, 9.585181139186087, 9.574515457139732, 9.563470484819508, 9.552432088090951, 9.541799726647655, 9.531900381912456, 9.522774214603384, 9.51416992349335, 9.506063521038248, 9.499133111094578, 9.4929650556807, 9.487408536817204, 9.482336460896827, 9.478443854275653, 9.47505677233121, 9.472613681417405, 9.47071169217314, 9.469765397771242, 9.469323953737824, 9.4694052930531, 9.469948270913749, 9.47182764177927, 9.475441743743911, 9.479876635349745, 9.48485076652488, 9.48964005005543, 9.495358635671089, 9.501766970695147, 9.508805321641688, 9.51673449548209, 9.525857674176658, 9.535213514549305, 9.54512911088369, 9.555638545316423, 9.56565021037492, 9.57481833351854, 9.584163780151249, 9.592860060207387, 9.600631616426682, 9.607391625588978, 9.613876815445241, 9.620242828325159, 9.625716469369054, 9.633767723758961, 9.643486269935526, 9.653718287103743, 9.663813683338347, 9.674511125853307, 9.683521003515079};
            double startdis = DynamicTimeWarping.d(startzarr,starttemplate);

            double[] endzarr = new double[endz.size()];
            for(int i = 0; i < endz.size(); i++)
            {
                endzarr[i] = Double.parseDouble(String.valueOf(endz.get(i)));
            }
            double[] endtemplate = {10.065793635403114, 10.08238691213579, 10.099112626173332, 10.115018205960201, 10.130271629869728, 10.14641334144008, 10.162444367615594, 10.177007645880288, 10.190121597725085, 10.20190771451862, 10.213885210475526, 10.22632620909196, 10.23898469882754, 10.251289027271767, 10.263157157911147, 10.274930602845716, 10.285726279292064, 10.294221139738509, 10.301112810552937, 10.30651637470084, 10.310529424376966, 10.313623990853426, 10.316462024762172, 10.319333500633677, 10.321083274616997, 10.321675754212233, 10.321243515559615, 10.319008475493213, 10.314914844586047, 10.309665869405876, 10.304894512319002, 10.299614061603709, 10.293263820719261, 10.286395566858072, 10.279429131283235, 10.272432874405693, 10.26586783938546, 10.258346039416002, 10.249970483389525, 10.241031528502823, 10.232059017791316, 10.222573160653923, 10.214339518114347, 10.208606337165048, 10.205043639828839, 10.200994806644598, 10.194652043011573, 10.18486091646981, 10.173844798744748, 10.163776008729464, 10.155948027952197, 10.148521321902304, 10.140865216816595, 10.13243007070718, 10.123525575231293, 10.115789918388538, 10.110006290264336, 10.105630614195013, 10.101289939078328, 10.09580315091364, 10.089292309336994, 10.083559598482443, 10.078391805269419};
            double enddis = DynamicTimeWarping.d(endzarr,endtemplate);
            dtwlist.add(startdis);
            dtwlist.add(enddis);
        }
        return  dtwlist;
    }
}
